(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(32),s=n.n(c),i=n(8),u=n(18),j=n(5),o=n(9),l=n.n(o),d=n(15),b=n(19);n(44),n(55),n(54);b.a.initializeApp({apiKey:"AIzaSyAw696Lt9grKSMr-_fQysj_us7Zof51flk",authDomain:"nwitter-5e982.firebaseapp.com",projectId:"nwitter-5e982",storageBucket:"nwitter-5e982.appspot.com",messagingSenderId:"994724876832",appId:"1:994724876832:web:41ccc35d8ca60877fb2245"});var p,O=b.a,h=b.a.auth(),x=b.a.firestore(),f=b.a.storage(),m=n(1),g=function(e){var t=e.userObj,n=e.refreshUser,a=Object(r.useState)(t.displayName),c=Object(i.a)(a,2),s=c[0],u=c[1],o=Object(j.f)(),b=function(){var e=Object(d.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.displayName===s){e.next=5;break}return e.next=4,t.updateProfile({displayName:s});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:b,children:[Object(m.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},type:"text",value:s,placeholder:"display name"}),Object(m.jsx)("input",{type:"submit",value:"Update Profile"})]}),Object(m.jsx)("button",{onClick:function(){h.signOut(),o.push("/")},children:"Log Out"})]})},v=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),u=s[0],j=s[1],o=Object(r.useState)(!0),b=Object(i.a)(o,2),p=b[0],O=b[1],x=Object(r.useState)(""),f=Object(i.a)(x,2),g=f[0],v=f[1],w=function(e){var t=e.target,n=t.name,r=t.value;"email"===n?a(r):"password"===n&&j(r)},y=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=7;break}return e.next=5,h.createUserWithEmailAndPassword(n,u);case 5:e.next=9;break;case 7:return e.next=9,h.signInWithEmailAndPassword(n,u);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),v(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"login_form_wrapper",children:Object(m.jsxs)("form",{onSubmit:y,className:"login_form",children:[Object(m.jsx)("input",{className:"login_form_id",name:"email",type:"text",placeholder:"Email",value:n,onChange:w,autoComplete:"username",required:!0}),Object(m.jsx)("input",{className:"login_form_password",name:"password",type:"password",placeholder:"Password",value:u,onChange:w,autoComplete:"current-password",required:!0}),Object(m.jsx)("input",{className:"login_form_submit",type:"submit",value:p?"Create Account":"Log In",required:!0}),g]})}),Object(m.jsx)("span",{onClick:function(){return O((function(e){return!e}))},children:p?"Sign in":"Create Account"})]})},w=function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new O.auth.GoogleAuthProvider:"github"===n&&(r=new O.auth.GithubAuthProvider),e.next=4,h.signInWithPopup(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:e,name:"google",children:"Login with Google"}),Object(m.jsx)("button",{onClick:e,name:"github",children:"Login with Github"})]})},y=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"register",children:[Object(m.jsx)(v,{}),Object(m.jsx)("div",{className:"social_links",children:Object(m.jsx)(w,{})})]})})},N=n(38),k=function(e){var t=e.nweetObj,n=e.isOwner,a=Object(r.useState)(!1),c=Object(i.a)(a,2),s=c[0],u=c[1],j=Object(r.useState)(t.text),o=Object(i.a)(j,2),b=o[0],p=o[1],O=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this nweet?")){e.next=7;break}return e.next=4,x.doc("nweets/".concat(t.id)).delete();case 4:if(""===t.attachmentUrl){e.next=7;break}return e.next=7,f.refFromURL(t.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){return u((function(e){return!e}))},g=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x.doc("nweets/".concat(t.id)).update({text:b});case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:s?Object(m.jsx)(m.Fragment,{children:n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:g,children:[Object(m.jsx)("input",{onChange:function(e){var t=e.target.value;p(t)},type:"text",placeholder:"Edit your nweet",value:b,maxLength:"80",required:!0}),Object(m.jsx)("input",{type:"submit",value:"Update Nweet"})]}),Object(m.jsx)("button",{onClick:h,children:"Cancel"})]})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(m.jsx)("img",{src:t.attachmentUrl,alt:"img",width:"50px",height:"50px"}),n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:O,children:"Delete Nweet"}),Object(m.jsx)("button",{onClick:h,children:"Edit Nweet"})]})]})})},S=n(57),C=function(e){var t=e.userObj,n=Object(r.useState)(""),a=Object(i.a)(n,2),c=a[0],s=a[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),o=j[0],b=j[1],p=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==c){e.next=4;break}return alert("\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!"),e.abrupt("return");case 4:if(r="",""===o){e.next=13;break}return a=f.ref().child("".concat(t.uid,"/").concat(Object(S.a)())),e.next=9,a.putString(o,"data_url");case 9:return i=e.sent,e.next=12,i.ref.getDownloadURL();case 12:r=e.sent;case 13:return u={text:c,createdAt:Date.now(),createrId:t.uid,attachmentUrl:r},e.next=16,x.collection("nweets").add(u);case 16:s(""),b("");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(r.useRef)();return Object(m.jsxs)("form",{onSubmit:p,children:[Object(m.jsx)("input",{value:c,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"What's on your mind?",maxLength:"80"}),Object(m.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;b(t)},n.readAsDataURL(t)},ref:O}),Object(m.jsx)("input",{type:"submit",value:"Nweet"}),o&&Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:o,alt:"img",width:"50px",height:"50px"}),Object(m.jsx)("button",{onClick:function(){O.current.value=null,b("")},children:"Clear"})]})]})},_=function(e){var t=e.userObj,n=Object(r.useState)([]),a=Object(i.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){x.collection("nweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));s(t)}))}),[]),Object(m.jsxs)("div",{className:"nweetWrapper",children:[Object(m.jsx)(C,{userObj:t}),Object(m.jsx)("div",{children:c.map((function(e){return Object(m.jsx)(k,{nweetObj:e,isOwner:e.createrId===t.uid},e.id)}))})]})},U=function(e){var t=e.userObj;return null===t.displayName&&(t.displayName="\uc775\uba85"),Object(m.jsx)("nav",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/",children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsxs)(u.b,{to:"/profile",children:[" ",t.displayName,"'s Profile "]})})]})})},A=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.userObj;return Object(m.jsxs)(u.a,{children:[n&&Object(m.jsx)(U,{userObj:r}),Object(m.jsx)(j.c,{children:n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j.a,{exact:!0,path:"/",children:Object(m.jsx)(_,{userObj:r})}),Object(m.jsx)(j.a,{exact:!0,path:"/profile",children:Object(m.jsx)(g,{userObj:r,refreshUser:t})})]}):Object(m.jsx)(j.a,{exact:!0,path:"/",children:Object(m.jsx)(y,{})})})]})},I=(n(51),n(33)),F=n(23),P=n(34),L=Object(F.a)(p||(p=Object(I.a)(["\n",";\n"])),P.a);var D=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(i.a)(c,2),u=s[0],j=s[1];return Object(r.useEffect)((function(){h.onAuthStateChanged((function(e){j(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),a(!0)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(L,{}),Object(m.jsxs)("div",{className:"main_wrapper_1",children:[Object(m.jsxs)("div",{className:"main_top",children:[Object(m.jsx)("header",{className:"header",children:Object(m.jsx)("div",{className:"birdImg",children:Object(m.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:Object(m.jsx)("g",{children:Object(m.jsx)("path",{d:"M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"})})})})}),Object(m.jsxs)("main",{className:"main",children:[Object(m.jsx)("div",{className:"birdImg2_wrapper",children:Object(m.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"birdImg2",children:Object(m.jsx)("g",{children:Object(m.jsx)("path",{d:"M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"})})})}),Object(m.jsxs)("div",{className:"main_text_wrapper",children:[Object(m.jsx)("span",{children:"\uc9c0\uae08 \uc77c\uc5b4\ub098\uace0 \uc788\ub294 \uc77c"}),Object(m.jsx)("span",{children:"\uc624\ub298 \ub290\uc704\ud130\uc5d0 \ub85c\uadf8\uc778\ud558\uc138\uc694."})]}),n?Object(m.jsx)(A,{refreshUser:function(){var e=h.currentUser;j({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(u),userObj:u}):"initializing...",Object(m.jsx)("span",{children:"\uacc4\uc815\uc774 \uc544\uc9c1 \uc5c6\uc73c\uc2e0\uac00\uc694?"}),Object(m.jsx)("span",{children:"Create Account"})]})]}),Object(m.jsx)("div",{className:"main_bottom",children:Object(m.jsxs)("footer",{className:"footer",children:["\uc18c\uac1c \uace0\uac1d\uc13c\ud130 \uc774\uc6a9\uc57d\uad00 \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac\ubc29\uce68 \ucfe0\ud0a4 \uc815\ucc45 \uad11\uace0 \uc815\ubcf4 \ube14\ub85c\uadf8 \uc0c1\ud0dc \ucc44\uc6a9 \ube0c\ub79c\ub4dc \ub9ac\uc18c\uc2a4 \uad11\uace0 \ub9c8\ucf00\ud305 \ube44\uc988\ub2c8\uc2a4\uc6a9 \ud2b8\uc704\ud130 \uac1c\ubc1c\uc790 \ub514\ub809\ud130\ub9ac \uc124\uc815 \xa9",(new Date).getFullYear(),"Nwitter"]})})]})]})};n(52);s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.02344fba.chunk.js.map